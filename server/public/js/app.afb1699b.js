(function(t){function e(e){for(var o,c,i=e[0],s=e[1],l=e[2],h=0,b=[];h<i.length;h++)c=i[h],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&b.push(r[c][0]),r[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);u&&u(e);while(b.length)b.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(o=!1)}o&&(a.splice(e--,1),t=c(c.s=n[0]))}return t}var o={},r={app:0},a=[];function c(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=o,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=s;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"15a1":function(t,e,n){"use strict";n("be4f")},"168e":function(t,e,n){},"2a71":function(t,e,n){"use strict";n("32d2")},"32d2":function(t,e,n){},"4a84":function(t,e,n){"use strict";n("ef4a")},"647f":function(t,e,n){"use strict";n("da5b")},8191:function(t,e,n){"use strict";n("168e")},8792:function(t,e,n){},a983:function(t,e,n){"use strict";n("8792")},b006:function(t,e,n){"use strict";n("c4af")},be4f:function(t,e,n){},c4af:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e),n.d(e,"SlotColors",(function(){return rt}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),r=n("5530"),a=(n("7db0"),n("159b"),n("4057"),n("5502")),c=Object(a["a"])({state:function(){return{teamSlots:[],slotPositions:[],teams:[],nextSlotId:0,nextTeamId:0}},mutations:{registerTeam:function(t,e){t.teams.push(Object(r["a"])(Object(r["a"])({},e.team),{},{id:e.id})),t.nextTeamId++},registerSlot:function(t,e){t.teamSlots.push({id:e.id,full:!1,color:rt.EMPTY}),t.slotPositions.push({id:e.id,x:e.pos.x,y:e.pos.y}),t.nextSlotId++},moveSlot:function(t,e){var n=t.teamSlots.find((function(t){return t.id===e.from}));n&&(n.full=!1,n.color=rt.EMPTY);var o,r=t.teamSlots.find((function(t){return t.id===e.to}));r&&(r.full=!0,r.color=(null===(o=t.teams.find((function(t){return t.id===e.team})))||void 0===o?void 0:o.color)||rt.EMPTY)},markSnapSlot:function(t,e){t.teamSlots.forEach((function(t){t.id!==e.id?t.color!==rt.SNAP||e.allowMultiple||(t.color=rt.EMPTY):t.color=rt.SNAP}))}},getters:{closestOpenSlot:function(t){return function(e,n){var o,r=1/0;return t.teamSlots.forEach((function(a){if(!a.full){var c=t.slotPositions.find((function(t){return t.id===a.id}));if(c){var i=s(c,{x:e,y:n});i<r&&(o=a,r=i)}}})),o}},slot:function(t){return function(e){return t.teamSlots.find((function(t){return t.id===e}))}},team:function(t){return function(e){return t.teams.find((function(t){return t.id===e}))}},slotPos:function(t){return function(e){return t.slotPositions.find((function(t){return t.id===e}))}},nextSlotId:function(t){return t.nextSlotId},nextTeamId:function(t){return t.nextTeamId}}}),i={REGISTER_SLOT:"registerSlot",REGISTER_TEAM:"registerTeam",MOVE_SLOT:"moveSlot",MARK_SNAP_SLOT:"markSnapSlot"};function s(t,e){return Math.hypot(t.x-e.x,t.y-e.y)}function l(t,e,n,r,a,c){var i=Object(o["p"])("competition-tree"),s=Object(o["p"])("competition-teams");return Object(o["k"])(),Object(o["e"])(o["a"],null,[Object(o["g"])(i),Object(o["g"])(s)],64)}var u={class:"tree"};function h(t,e,n,r,a,c){var i=Object(o["p"])("root-branch-display");return Object(o["k"])(),Object(o["e"])("div",u,[Object(o["g"])(i,{branch:t.tree},null,8,["branch"])])}var b=n("d4ec"),d=n("262e"),f=n("2caf"),p=(n("cb29"),n("9ab4")),m=n("ce1f"),v=(n("99af"),n("4c53"),Object(o["f"])("h2",null,"Ã—",-1)),O=[v],g={class:"children"};function j(t,e,n,r,a,c){var i=Object(o["p"])("branch-connector"),s=Object(o["p"])("branch-display",!0);return Object(o["k"])(),Object(o["e"])("div",{class:"branch",style:Object(o["j"])("flex-direction: ".concat(t.reverse?"row-reverse":"row",";  color: ").concat(t.displayTextColor))},[Object(o["f"])("div",{class:"team-placeholder",style:Object(o["j"])("background-color: ".concat(t.displayColor,";"))},O,4),Object(o["g"])(i,{width:t.reverse?-32:32,height:t.cHeight},null,8,["width","height"]),Object(o["f"])("div",g,[(Object(o["k"])(!0),Object(o["e"])(o["a"],null,Object(o["o"])(t.branch.sub,(function(e,n){return Object(o["k"])(),Object(o["c"])(s,{key:n,branch:e,reverse:t.reverse,"parent-slot-id":t._slotId,"parent-beaten":t.beaten,"parent-top-color":t.passedColor},null,8,["branch","reverse","parent-slot-id","parent-beaten","parent-top-color"])})),128))])],4)}var y=n("bee2"),T=(n("a9e3"),["width","height"]),S=["d"];function E(t,e,n,r,a,c){return Object(o["k"])(),Object(o["e"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"branch-connector",width:t._width+"px",height:t._height+"px",style:Object(o["j"])(t.style)},[Object(o["f"])("path",{d:t.path},null,8,S)],12,T)}var k=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(b["a"])(this,n),e.apply(this,arguments)}return Object(y["a"])(n,[{key:"_width",get:function(){return Math.abs(this.width||0)}},{key:"_height",get:function(){return Math.abs(this.height||0)}},{key:"style",get:function(){var t="".concat((this.width||0)<0?"1":"-1",",").concat((this.height||0)<0?"1":"-1"),e="".concat((this.height||0)<0?"margin-top":"margin-bottom",": ").concat(this._height,"px"),n=(this.width||0)<0?"right":"left";return"transform: scale(".concat(t,"); ").concat(e,"; ").concat(n,": -1rem")}},{key:"path",get:function(){var t=Math.min(this._width,this._height)/2;return"\n    M 0 0 \n    l ".concat(this._width/2-t," 0 \n    q ").concat(t," 0 ").concat(t," ").concat(t," \n    l 0 ").concat(this._height-2*t," \n    q 0 ").concat(t," ").concat(t," ").concat(t," \n    l ").concat(this._width/2-t," 0 \n    ")}}]),n}(m["b"]);k=Object(p["a"])([Object(m["a"])({name:"BranchConnector",props:{width:Number,height:Number}})],k);var x=k,M=(n("15a1"),n("d959")),w=n.n(M);const A=w()(x,[["render",E]]);var I=A,C=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){var t;return Object(b["a"])(this,n),t=e.apply(this,arguments),t.slotId=-1,t.cHeight=0,t}return Object(y["a"])(n,[{key:"_slotId",get:function(){return this.slotId}},{key:"passedColor",get:function(){var t;return null!==(t=this.teamSlot)&&void 0!==t&&t.full?this.teamSlot.color:this.parentTopColor||rt.TEXT}},{key:"displayTextColor",get:function(){var t=this.teamSlot;return t?t.full?this.parentBeaten?rt.TEXT_BEATEN:rt.TEXT:this.parentTopColor||rt.TEXT:rt.TEXT}},{key:"displayColor",get:function(){var t=this.teamSlot;return t?t.color===rt.EMPTY?this.beaten?rt.BEATEN:rt.EMPTY:t.color:rt.LOADING}},{key:"beaten",get:function(){var t;return this.parentBeaten||(null===(t=this.teamSlot)||void 0===t?void 0:t.full)||!1}},{key:"parentSlot",get:function(){return this.$store.getters.slot(this.parentSlotId)}},{key:"teamSlot",get:function(){return this.$store.getters.slot(this.slotId)}},{key:"mounted",value:function(){this.updateCHeight();var t=this.registerSlot();t||console.log("unable to register Slot on mount",this)}},{key:"registerSlot",value:function(){var t=this.$el;if(!t)return!1;var e=t.querySelector(":scope > .team-placeholder");return!!e&&(this.slotId=this.$store.getters.nextSlotId,this.$store.commit(i.REGISTER_SLOT,{id:this.slotId,pos:{x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y}}),!0)}},{key:"updateCHeight",value:function(){var t;if(this.$el){var e=this.$el.getBoundingClientRect(),n=null===(t=this.$parent)||void 0===t?void 0:t.$el.getBoundingClientRect();this.cHeight=e.y+e.height/2-(n.y+n.height/2)}}}]),n}(m["b"]);C=Object(p["a"])([Object(m["a"])({name:"BranchDisplay",props:{branch:Object,reverse:Boolean,parentSlotId:Number,parentBeaten:Boolean,parentTopColor:String},components:{BranchDisplay:C,BranchConnector:I}})],C);var _=C;n("b006");const P=w()(_,[["render",j]]);var B=P,$={class:"root-branch branch"};function D(t,e,n,r,a,c){var i=Object(o["p"])("branch-display");return Object(o["k"])(),Object(o["e"])("div",$,[t.branch.sub&&t.branch.sub.length>0?(Object(o["k"])(),Object(o["c"])(i,{key:0,branch:t.branch.sub[0],reverse:!0,"parent-slot-id":t._slotId,"parent-beaten":t.beaten,"parent-top-color":t.passedColor},null,8,["branch","parent-slot-id","parent-beaten","parent-top-color"])):Object(o["d"])("",!0),Object(o["f"])("div",{class:Object(o["i"])("team-placeholder"),style:Object(o["j"])("background-color: ".concat(t.teamSlot?t.teamSlot.color:"orange",";"))},[Object(o["f"])("h2",{class:Object(o["i"])(t.beaten?"won":"")},"ðŸ‘‘",2)],4),t.branch.sub&&t.branch.sub.length>1?(Object(o["k"])(),Object(o["c"])(i,{key:1,branch:t.branch.sub[1],reverse:!1,"parent-slot-id":t._slotId,"parent-beaten":t.beaten,"parent-top-color":t.passedColor},null,8,["branch","parent-slot-id","parent-beaten","parent-top-color"])):Object(o["d"])("",!0)])}var R=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(b["a"])(this,n),e.apply(this,arguments)}return n}(B);R=Object(p["a"])([Object(m["a"])({components:{BranchDisplay:B}})],R);var N=R;n("647f");const U=w()(N,[["render",D]]);var L=U,X=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){var t;return Object(b["a"])(this,n),t=e.apply(this,arguments),t.dummyBranch={sub:[{sub:[]},{sub:[{sub:[]},{sub:[]},{sub:[{sub:[]}]}]},{sub:[{sub:[]},{sub:[]}]},{sub:[{sub:[]},{sub:[{sub:[]},{sub:[]},{sub:[]}]},{sub:[]}]}]},t.wmBranch={sub:Array(2).fill({sub:Array(2).fill({sub:Array(2).fill({sub:[]})})})},t.tree={sub:[t.wmBranch,t.wmBranch]},t}return n}(m["b"]);X=Object(p["a"])([Object(m["a"])({components:{BranchDisplay:B,RootBranchDisplay:L}})],X);var Y=X;n("a983");const F=w()(Y,[["render",h]]);var H=F,G={class:"teams"};function q(t,e,n,r,a,c){var i=Object(o["p"])("team-display");return Object(o["k"])(),Object(o["e"])("div",G,[(Object(o["k"])(!0),Object(o["e"])(o["a"],null,Object(o["o"])(t.teams,(function(t,e){return Object(o["k"])(),Object(o["c"])(i,{key:e,team:t},null,8,["team"])})),128))])}n("b0c0");function K(t,e,n,r,a,c){return Object(o["k"])(),Object(o["e"])("div",{class:"team",onMousedown:e[0]||(e[0]=function(){return t.startDraging&&t.startDraging.apply(t,arguments)}),onMouseup:e[1]||(e[1]=function(){return t.stopDraging&&t.stopDraging.apply(t,arguments)}),style:Object(o["j"])("transform: translate(".concat(t.x,"px, ").concat(t.y,"px); background-color: ").concat(t.team.color))},[Object(o["f"])("h2",null,Object(o["q"])(t.team.name),1)],36)}var J=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){var t;return Object(b["a"])(this,n),t=e.apply(this,arguments),t.x=0,t.y=0,t.dragOffsetX=0,t.dragOffsetY=0,t.shift=!1,t.slotId=-1,t.teamId=-1,t}return Object(y["a"])(n,[{key:"teamSlot",get:function(){return this.$store.getters.slot(this.slotId)}},{key:"teamSlotPos",get:function(){return this.$store.getters.slotPos(this.slotId)}},{key:"mounted",value:function(){this.registerTeam(),this.commitMoveClosest(),this.moveToCurrentSlot()}},{key:"registerTeam",value:function(){this.teamId=this.$store.getters.nextTeamId,this.$store.commit(i.REGISTER_TEAM,{id:this.teamId,team:this.team})}},{key:"moveToCurrentSlot",value:function(){var t,e;this.x=(null===(t=this.teamSlotPos)||void 0===t?void 0:t.x)||0,this.y=(null===(e=this.teamSlotPos)||void 0===e?void 0:e.y)||0}},{key:"startDraging",value:function(t){this.$el instanceof HTMLElement&&(this.dragOffsetX=t.clientX-this.x,this.dragOffsetY=t.clientY-this.y,this.$el.onpointermove=this.drag,this.$el.classList.add("selected"),this.$el.setPointerCapture(t.pointerId))}},{key:"stopDraging",value:function(t){this.$el instanceof HTMLElement&&(this.$el.onpointermove=null,this.$el.classList.remove("selected"),this.$el.releasePointerCapture(t.pointerId),this.commitMoveClosest(),this.moveToCurrentSlot())}},{key:"commitMoveClosest",value:function(){var t=this.$store.getters.closestOpenSlot(this.x,this.y),e=t?t.id:-1;this.$store.commit(i.MOVE_SLOT,{from:this.slotId,to:e,team:this.teamId}),this.slotId=e}},{key:"drag",value:function(t){var e,n;this.x=t.clientX-this.dragOffsetX,this.y=t.clientY-this.dragOffsetY,this.x=Math.min(Math.max(0,this.x),window.innerWidth-((null===(e=this.bounds)||void 0===e?void 0:e.width)||0)),this.y=Math.min(Math.max(0,this.y),window.innerHeight-((null===(n=this.bounds)||void 0===n?void 0:n.height)||0));//! debouce this if performance too low! <(
var o=this.$store.getters.closestOpenSlot(this.x,this.y);this.$store.commit(i.MARK_SNAP_SLOT,{id:o.id})}},{key:"bounds",get:function(){return this.$el instanceof Element?this.$el.getBoundingClientRect():null}}]),n}(m["b"]);J=Object(p["a"])([Object(m["a"])({name:"TeamDisplay",props:{team:Object}})],J);var V=J;n("2a71");const W=w()(V,[["render",K]]);var z=W,Q=function(t){Object(d["a"])(n,t);var e=Object(f["a"])(n);function n(){var t;return Object(b["a"])(this,n),t=e.apply(this,arguments),t.teams=[{name:"yoooo team",color:"#9A879D"},{name:"TEAM 2 4 U",color:"#EF233C"},{name:"TEAM 2 4 U",color:"#D80032"},{name:"TEAM 2 4 U",color:"#A49966"},{name:"TEAM 2 4 U",color:"#FF570A"},{name:"yoooo team",color:"#9A879D"},{name:"TEAM 2 4 U",color:"#EF233C"},{name:"TEAM 2 4 U",color:"#D80032"},{name:"TEAM 2 4 U",color:"#A49966"},{name:"TEAM 2 4 U",color:"#FF570A"},{name:"yoooo team",color:"#9A879D"},{name:"TEAM 2 4 U",color:"#EF233C"},{name:"TEAM 2 4 U",color:"#D80032"},{name:"TEAM 2 4 U",color:"#A49966"},{name:"TEAM 2 4 U",color:"#FF570A"},{name:"W4F",color:"#12355B"}],t}return n}(m["b"]);Q=Object(p["a"])([Object(m["a"])({components:{TeamDisplay:z}})],Q);var Z=Q;n("8191");const tt=w()(Z,[["render",q]]);var et=tt,nt={components:{CompetitionTree:H,CompetitionTeams:et}};n("4a84");const ot=w()(nt,[["render",l]]);var rt,at=ot;(function(t){t["EMPTY"]="var(--clr-slot-empty)",t["SNAP"]="var(--clr-slot-snap)",t["BEATEN"]="var(--clr-slot-beaten)",t["TEXT_BEATEN"]="var(--clr-text-beaten)",t["TEXT"]="var(--clr-text)",t["BACKGROUND"]="var(--clr-bg)",t["LOADING"]="var(--clr-bg)"})(rt||(rt={})),Object(o["b"])(at).use(c).mount("#app")},da5b:function(t,e,n){},ef4a:function(t,e,n){}});
//# sourceMappingURL=app.afb1699b.js.map